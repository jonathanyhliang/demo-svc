FROM golang:alpine

RUN apk add socat git 

WORKDIR /root

RUN git clone https://github.com/jonathanyhliang/hawkbit-fota.git --depth=1

WORKDIR /root/hawkbit-fota

RUN go mod tidy \
    && go build -o ./build/cli ./cli

RUN apk del git